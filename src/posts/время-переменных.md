---
layout: layouts/post.njk
title: Время переменных
date: 2020-12-16T14:29:15.395Z
---
В этой статье я расскажу, как собрал демку с использованием кастомных свойств CSS (они же CSS-переменные) и по ходу проапгрейдил своё мышление в контексте CSS.

Вёрстка аналоговых часов не то чтобы оригинальная идея, но она показалась мне удобным способом показать особенности использования кастомных свойств.

Итак, вот что вышло:

![Часы с движущимися стрелками](/images/1-mnazppc5rps6ag07n4b7qa.gif "Часы с движущимися стрелками")

<iframe height="300" style="width: 100%;" scrolling="no" title="Custom properties analog clock" src="https://codepen.io/juwain/embed/preview/OQQVKE?height=300&theme-id=9939&default-tab=result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/juwain/pen/OQQVKE'>Custom properties analog clock</a> by juwain
  (<a href='https://codepen.io/juwain'>@juwain</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

Вот как это устроено:

* JS генерирует данные о текущем времени и отправляет их в HTML и CSS;
* HTML использует эти данные для отображения времени в текстовом виде;
* CSS переводит числа в визуально понятный человеку графический вид.

- - -

Итак, начнём с разметки.

```html
<time class="clock">
  <span class="clock__hand clock__hand--hour"></span>:
  <span class="clock__hand clock__hand--minute"></span>:
  <span class="clock__hand clock__hand--second"></span>

  <svg class="clock__face" aria-hidden="true" role="presentation">
    <circle class="clock__face-stroke"></circle>
  </svg>
</time>
```

Общий контейнер часов `<time>`, три стрелки и декоративная SVG для отрисовки циферблата. Сразу продумаем доступность:

- в спанах стрелок с помощью JavaScript будет записываться текущее время числами;
- элементу `<time>` будет задано соответсвующее значение атрибута **datetime**;
- декоративный элемент `<svg>` скроем от скринридеров атрибутом **aria-hidden** и снимем с него смысловую нагрузку с помощью атрибута **role**.

- - -

Теперь CSS. Я не буду описывать весь код демки (лучше с ней [поиграть вживую](https://codepen.io/juwain/pen/OQQVKE)), а остановлюсь только на ключевых моментах.

Определим настройки внешнего вида часов — диаметр и толщину рамки часов:

```css
.clock {
  --clock-diameter: 250px;
  --clock-border-width: 5px;
}
```

Тут же используем эти переменные:

```css
.clock {
  width: var(--clock-diameter);
  height: var(--clock-diameter);
  border: var(--clock-border-width) solid #000000;
}
```

Пока всё просто.

Теперь стрелки часов. Сначала определим ширину и высоту стрелок и спозиционируем их по центру циферблата. По умолчанию стрелки будут шириной **1px** и высотой **50%**. В зависимости от ширины и высоты абсолютно спозиционированных стрелок вычисляются их координаты **top** и **left**:

```css
.clock__hand {
  --hand-width: 1px;
  --hand-height: 50%;

  position: absolute;

  top: calc(50% - var(--hand-height));
  left: calc(50% - calc(var(--hand-width) / 2));

  width: var(--hand-width);
  height: var(--hand-height);

  /* С кастомными свойствами можно производить
  арифметические операции с помощью функции calc() */
}
```


