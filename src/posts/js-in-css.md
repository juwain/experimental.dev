---
layout: layouts/post.njk
title: JS in CSS
date: 2021-01-02T14:03:29.168Z
---
–î–∞, —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, —Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è —Å—Ç–∞—Ç—å—è –∏–º–µ–Ω–Ω–æ –ø—Ä–æ JavaScript –≤ CSS.

–í–æ–æ–±—â–µ, –≤—Å—Ç–∞–≤–ª—è—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –≤ CSS‚Ää‚Äî‚Ää–¥–æ–≤–æ–ª—å–Ω–æ —Å—Ç—Ä–∞–Ω–Ω–∞—è –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –∏–¥–µ—è. –ê –ø–æ—è–≤–∏–ª–∞—Å—å –æ–Ω–∞ —É –º–µ–Ω—è –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ [—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://drafts.csswg.org/css-variables/#syntax) –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤.

–¢–∞–º –Ω–∞–ø–∏—Å–∞–Ω–æ:

> For example, the following is a valid custom property:
**--foo: if(x &gt; 5) this.width = 10;**
While this value is obviously useless as a variable, as it would be invalid in any normal property, it might be read and acted on by JavaScript.

–¢–æ –µ—Å—Ç—å, –≥–æ–≤–æ—Ä—è –ø–æ-–ø—Ä–æ—Å—Ç–æ–º—É: –≤ –∫–∞—Å—Ç–æ–º–Ω–æ–µ CSS-—Å–≤–æ–π—Å—Ç–≤–æ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ JS.

–ö–∞–∫ –∏ –∑–∞—á–µ–º —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–ü–µ—Ä–≤–∞—è –º—ã—Å–ª—å –±—ã–ª–∞ –æ–± –∏–∑–æ—â—Ä—ë–Ω–Ω–æ–π –∞—Ç–∞–∫–µ –Ω–∞ –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. üòà

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∂–µ—Ä—Ç–≤—É —Å–∫–∞—á–∞—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞: CSS –∏ JS. –í CSS –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `--script` –∏ JS-–∫–æ–¥–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```css
:root {
  --script: console.log("hack!");
}
```

–ê —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–µ–Ω JS-—Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ `--script` —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è:

```js
// –°—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç–∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
const style = getComputedStyle(document.documentElement);

// –ë–µ—Ä—ë–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ --script
const script = style.getPropertyValue('--script');

// –í—ã–ø–æ–ª–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ --script
new Function(script)();
```

–ò —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç:

![–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞](/images/1-qizkchbeg-bk4kcx84zikq.png "–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞")

–° –ø–æ–º–æ—â—å—é CSS-–∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤—ã–π –∫–æ–¥.

–î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º —Ç–∞–∫—É—é –∞–Ω–∏–º–∞—Ü–∏—é:

```css
:root {
  animation-name: hack;
  animation-duration: 3s;
  animation-delay: 1s;
  animation-fill-mode: backwards;
}
```

–í —ç—Ç–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç—Ä—ë—Ö —Å–µ–∫—É–Ω–¥ –±—É–¥–µ–º –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ `--script`:

```css
@keyframes hack {
  0% {
    --script: console.log("üôà");
  }
  33% {
    --script: console.log("üôâ");
  }
  66% {
    --script: console.log("üôä");
  }
}
```

–í JS –±—É–¥–µ–º —Å—á–∏—Ç—ã–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ `--script` –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É:

```js
setInterval(() => {
  const style = getComputedStyle(document.documentElement);
  const script = style.getPropertyValue('--script');
  
  new Function(script)();
}, 1000);
```

–ò —ç—Ç–æ —Ç–æ–∂–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç:

![–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞](/images/1-md2rtxmnx0xt-tvifkx45g.gif "–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞")

–≠—Ç–æ—Ç –∫–æ–¥ –µ—Å—Ç—å –≤ –¥–µ–º–∫–µ (https://codepen.io/juwain/pen/EEgOdr)[https://codepen.io/juwain/pen/EEgOdr].

---

–ò–≥—Ä—ã –≤ —Ö–∞–∫–µ—Ä–æ–≤ –∫–æ–Ω–µ—á–Ω–æ –∑–∞–±–∞–≤–Ω—ã–µ, –Ω–æ –º–æ–∂–Ω–æ –ª–∏ –∫–∞–∫-—Ç–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ–ª—å–∑–æ–π –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏—á—É —Å JS –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏?

–ü–æ –º–æ—Ç–∏–≤–∞–º [–∏–¥–µ–∏ –ì–∞—Ä—Ä–∏ –†–æ–±–µ—Ä—Ç—Å–∞](https://csswizardry.com/2018/01/finding-dead-css/) –º–Ω–µ –ø—Ä–∏—à–ª–∞ –≤ –≥–æ–ª–æ–≤—É –º—ã—Å–ª—å –æ ¬´–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏¬ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CSS-–∫–æ–¥–∞.

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –º–Ω–æ–≥–æ CSS-—Ñ–∞–π–ª–æ–≤ –Ω–∞ –±–æ–ª—å—à–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Å–±–æ—Ä–∫–∏. –ù—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –∏–∑ —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç.

–ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –≤ –∫–∞–∂–¥—ã–π CSS-—Ñ–∞–π–ª —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –æ—Ç–º–µ—Ç–∫—É –æ —Å–≤–æ—ë–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –≤ localStorage –±—Ä–∞—É–∑–µ—Ä–∞.

```css
/* ---------------------- –§–∞–π–ª style-1.css ---------------------- */
:root {
  --style-1: localStorage["--style-1"] = new Date();
}

/* ---------------------- –§–∞–π–ª style-2.css ---------------------- */
:root {
  --style-2: localStorage["--style-2"] = new Date();
}

/* ---------------------- –§–∞–π–ª style-3.css ---------------------- */
:root {
  --style-3: localStorage["--style-3"] = new Date();
}

/* –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ‚Ä¶ */
```

–ü—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü —Å–∞–π—Ç–∞ –º–æ–∂–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –Ω–∏—Ö JS:

```js
const properties = ['--style-1', '--style-2', '--style-3'];
let style = getComputedStyle(document.documentElement);

properties.forEach(property => {
  new Function(style.getPropertyValue(property))();
});
```

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —è —Å–¥–µ–ª–∞–ª –¥–≤–µ —É—Å–ª–æ–≤–Ω—ã—Ö —Å–±–æ—Ä–∫–∏ —Å—Ç–∏–ª–µ–π. –í –æ–¥–Ω—É —Å–±–æ—Ä–∫—É –≤–∫–ª—é—á–∏–ª –ø–µ—Ä–≤—ã–π –∏ —Ç—Ä–µ—Ç–∏–π CSS-—Ñ–∞–π–ª, –∞ –≤ –¥—Ä—É–≥—É—é‚Ää‚Äî‚Ää—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª. –í—Ç–æ—Ä–æ–π —Å—Ç–∏–ª–µ–≤–æ–π —Ñ–∞–π–ª –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è:

```css
/* ---------------------- –§–∞–π–ª bundle-1.css --------------------- */
@import "style-1.css";
@import "style-3.css";
  
/* ---------------------- –§–∞–π–ª bundle-2.css --------------------- */
@import "style-1.css";
```

–ó–∞—Ç–µ–º —è —Å–¥–µ–ª–∞–ª –¥–≤–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ –Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–∏–ª —Ñ–∞–π–ª `bundle-1.css`, –∞ –Ω–∞ –¥—Ä—É–≥–æ–π‚Ää‚Äî‚Ää`bundle-2.css`. –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–í localStorage —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å ¬´—Å–ª–µ–¥—ã¬ª:

![–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞](/images/1-qw8twl9pzsea27abgzueqq.gif "–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞")

–ü–µ—Ä–≤—ã–π —Å—Ç–∏–ª–µ–≤–æ–π —Ñ–∞–π–ª –æ—Å—Ç–∞–≤–∏–ª —Å–∞–º—É—é —Å–≤–µ–∂—É—é –º–µ—Ç–∫—É, —Ç—Ä–µ—Ç–∏–π‚Ää‚Äî‚Ää–±–æ–ª–µ–µ —Å—Ç–∞—Ä—É—é, –∞ –≤—Ç–æ—Ä–æ–π –≤–æ–æ–±—â–µ –Ω–µ –æ—Å—Ç–∞–≤–∏–ª —Å–ª–µ–¥–æ–≤.

---

–í localStorage –≤–º–µ—Å—Ç–æ –æ—Ç–º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á—ë—Ç—á–∏–∫ –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∏–ª–µ–π. –¢–∞–∫ –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –Ω–∞ —Å–∞–π—Ç–µ.

–ï—â—ë —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ç–µ–º, —á—Ç–æ –∫–∞–∂–¥–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∏–ª–µ–π –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–µ —Å —Å–µ—Ä–≤–µ—Ä–∞, –∞ –∏–∑ –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞.

–ù–∞–≤–µ—Ä–Ω—è–∫–∞ –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –µ—â—ë –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–π —Ñ–∏—á–∏. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ö, –≤ [—Ç–≤–∏—Ç—Ç–µ—Ä–µ](https://twitter.com/juwain) –∏–ª–∏ –µ—â—ë –≥–¥–µ-–Ω–∏–±—É–¥—å. ‚úåÔ∏è




